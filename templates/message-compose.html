<div class="row msg-compose-container">

    <alert
            topic="Something went wrong!"
            show-alert="$ctrl.showAlert"
            close-alert="$ctrl.closeAlert()"
    >
        <span>Server error. response status: <b>{{$ctrl.responseStatus}}</b> {{$ctrl.errorText}}</span>
    </alert>

    <div class="well msg-controls"></div>

    <div class="msg-recipients">
        <div class="row">
            <div class="col-md-2">
                <div class="well text-center msg-to">
                    <span class="msg-to-text">
                        To
                    </span>
                </div>
            </div>
            <div class="col-md-10">
                <user-picker
                        users="$ctrl.users"
                        picked="$ctrl.recipients"
                        api="$ctrl.recipientPanelApi"
                ></user-picker>
            </div>
        </div>
    </div>

    <div class="msg-recipients">
        <div class="row">
            <div class="col-md-2">
                <div class="well text-center msg-to">
                    <span style="font-size: 17px;">
                        From
                    </span>
                    <div style="font-size: 10px; color: darkgray; margin-top: 10px;">
                        For testing purposes, to be able to receive messages from others
                    </div>
                </div>
            </div>
            <div class="col-md-10">
                <user-picker
                        users="$ctrl.users"
                        picked="$ctrl.senders"
                        api="$ctrl.senderPanelApi"
                        pick-limit="1"
                ></user-picker>
            </div>
        </div>
    </div>

    <div class="msg-text">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title text-center">Message text</h3>
            </div>
            <div class="panel-body">
                <textarea
                        class="form-control msg-textarea"
                        rows="10"
                        ng-model="$ctrl.messageText"
                        ng-focus="$ctrl.recipientPanelApi.refreshInput(true); $ctrl.senderPanelApi.refreshInput(true);"
                ></textarea>

                <div class="row userinfo-buttons">
                    <div class="col-md-2"></div>
                    <div class="col-md-2">
                        <a class="btn btn-warning" ui-sref="mailbox">
                            Cancel
                        </a>
                    </div>
                    <div class="col-md-5"></div>
                    <div class="col-md-3">
                        <button
                                class="btn btn-info"
                                ng-click="$ctrl.sendMessage()"
                                ng-disabled="!$ctrl.checkMessage()"
                        >
                            Send
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>